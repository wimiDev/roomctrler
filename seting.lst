C51 COMPILER V9.54   SETING                                                                05/26/2017 20:48:15 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE SETING
OBJECT MODULE PLACED IN seting.obj
COMPILER INVOKED BY: J:\program\keil\C51\BIN\C51.EXE class\seting.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PR
                    -INT(.\seting.lst) TABS(2) OBJECT(seting.obj)

line level    source

   1          #include"seting.h"
   2          char inputval = 0;
   3          DATE _currtime;
   4          char setclosetime(DATE* closetime)
   5          {
*** WARNING C235 IN LINE 5 OF class\seting.c: parameter 1: different types
   6   1        char str[30];
   7   1        //获取输入的键值
   8   1        char key = getkey(0);
   9   1        char val = -1;  
  10   1        if(lvsecond==0)
  11   1        {
  12   2          if (key==3)  
  13   2          {
  14   3            //beebee(1);
  15   3            lvsecond=1;
  16   3            key=-1;
  17   3          };
  18   2        }
  19   1        if(lvsecond == 1 )
  20   1        {
  21   2          LCDcls();   
  22   2          val = inputbox();
  23   2          sprintf(str,"inputhour:=%d",(int)val);
  24   2          LCDprintf(str,0);
  25   2          if(key==3) {
  26   3            //beebee(1);
  27   3            lvsecond=2;
  28   3            closetime->hour = val;
  29   3            key=-1;
  30   3          };  
  31   2        } 
  32   1        if(lvsecond== 2 )
  33   1        {
  34   2          LCDcls();   
  35   2          val = inputbox();
  36   2          sprintf(str,"inputmin:=%d",(int)val);
  37   2          LCDprintf(str,0);
  38   2          if(key==3) {
  39   3            //beebee(1);
  40   3            lvsecond=3;
  41   3            closetime->min = val;
  42   3            key=-1;
  43   3          };  
  44   2        } 
  45   1        if(lvsecond== 3 )
  46   1        {
  47   2          LCDcls();   
  48   2          val = inputbox();
  49   2          sprintf(str,"inputsec:=%d",(int)val);
  50   2          LCDprintf(str,0);
  51   2          if(key==3) {
  52   3          //beebee(1);
  53   3          lvsecond=0;
C51 COMPILER V9.54   SETING                                                                05/26/2017 20:48:15 PAGE 2   

  54   3          closetime->sec = val;
  55   3          key=-1;
  56   3          LCDcls(); 
  57   3          LCDprintf("----------Waiting",0);
  58   3          return 0;
  59   3          };  
  60   2        } 
  61   1        return -1;
  62   1      }   
  63          void setcurrenttime()
  64          { 
  65   1        if(setclosetime(&_currtime)==0)
  66   1        {
  67   2          DS1302_SetTime(DS1302_HOUR,_currtime.hour); 
  68   2          DS1302_SetTime(DS1302_MINUTE,_currtime.min);
  69   2          DS1302_SetTime(DS1302_SECOND,_currtime.sec);
  70   2        }   
  71   1      }
  72          void setopentime(DATE* opentime)
  73          {
*** WARNING C235 IN LINE 73 OF class\seting.c: parameter 1: different types
  74   1        setclosetime(opentime);
  75   1      }
  76          char inputbox()
  77          {
  78   1        char key = getkey(0); 
  79   1        if(key!=-1&&getnumber(key)!=-1)
  80   1        {
  81   2          inputval = (inputval*10 + getnumber(key));
  82   2        } 
  83   1      //  //确定
  84   1      //  if(key==3)return inputval;
  85   1        if(key==14)
  86   1        {
  87   2          //退格
  88   2          inputval = (inputval-inputval%10) / 10;   
  89   2        }   
  90   1        return inputval;
  91   1      }
  92          void setbeeanle()
  93          {
  94   1          char str[30];
  95   1        //获取输入的键值
  96   1          char key = getkey(0);
  97   1          if (key == 3 && lvsecond == 0)   
  98   1          {
  99   2            lvsecond = 4;
 100   2            LCDcls(); 
 101   2            key = -1;
 102   2          }
 103   1          if(lvsecond == 4)
 104   1          {
 105   2              if(key==15)
 106   2              {
 107   3              //上翻页
 108   3                enablebee = ~enablebee;
 109   3              }
 110   2              if(key==11)
 111   2              {
 112   3              //下翻页
 113   3                enablebee = ~enablebee;
 114   3              }
C51 COMPILER V9.54   SETING                                                                05/26/2017 20:48:15 PAGE 3   

 115   2              if(enablebee)
 116   2              {
 117   3                sprintf(str,"SET--BEE----ON----");
 118   3                LCDprintf(str,0);
 119   3              }
 120   2              else
 121   2              {
 122   3                sprintf(str,"SET--BEE----OFF---");
 123   3                LCDprintf(str,0);
 124   3              }
 125   2              if (key == 3)
 126   2              {
 127   3                lvsecond=0;
 128   3                key = -1;
 129   3                beebee(3);
 130   3              }
 131   2          }
 132   1      }
 133          void setlvoff_on()
 134          {
 135   1          char str[30];
 136   1          char val = -1;
 137   1          char setp1 = 0;
 138   1          char setp2 = 10;
 139   1        //获取输入的键值
 140   1          char key = getkey(0);
 141   1          if (key == 3 && lvsecond == 0)   
 142   1          {
 143   2            lvsecond = 5;
 144   2            LCDcls(); 
 145   2            key = -1;
 146   2          }
 147   1          else
 148   1          {
 149   2            sprintf(str,"LVCLOSE:%d-LVOPEN:%d",(int)lvtooff,(int)lvtoopen);
 150   2            LCDprintf(str,0);
 151   2          }
 152   1          if(lvsecond == 5 )
 153   1          {
 154   2            LCDcls();
 155   2            val = inputbox();
 156   2            sprintf(str,"LV-CLOSE--%d-TO-%d---:=%d",(int)setp1,(int)setp2,(int)val);
 157   2            LCDprintf(str,0);
 158   2            if(val > 10)val = val%10;
 159   2            if(val < 0)val = 0;
 160   2            if(key==3)
 161   2            {
 162   3              lvsecond = 6;
 163   3              key=-1;
 164   3              lvtooff = val;
 165   3            }
 166   2          }
 167   1          if(lvsecond == 6 )
 168   1          {
 169   2            if(lvtooff >= 10)
 170   2            {
 171   3              lvsecond = 0;
 172   3              key=-1;
 173   3              lvtoopen = 0;
 174   3              return;
 175   3            }
 176   2            LCDcls();
C51 COMPILER V9.54   SETING                                                                05/26/2017 20:48:15 PAGE 4   

 177   2            val = inputbox();
 178   2            setp1 = lvtooff + 1;
 179   2            sprintf(str,"LV-OPEN--%d-TO-%d---:=%d",(int)setp1,(int)setp2,(int)val);
 180   2            LCDprintf(str,0);
 181   2            if(val > 10)val = val%10;
 182   2            if(val < 0)val = setp1;
 183   2            if(key==3 )
 184   2            {
 185   3              LCDcls();
 186   3              lvsecond = 0;
 187   3              key=-1;
 188   3              lvtoopen = val;
 189   3            }
 190   2          }
 191   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1119    ----
   CONSTANT SIZE    =    168    ----
   XDATA SIZE       =      6     101
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
